<app-top-bar [toBarTitle]="toBarTitle" [showtopNav]="showtopNav"></app-top-bar>
<section class="main-wrapper">
  <div class="container-fluid">
    <form class="form" [formGroup]="generalForm">
      <div class="row ar-receipts">
        <div class="col-12 pe-0">
          <div class="card">
            <div class="card-body pb-0">
              <div
                class="d-flex align-items-center justify-content-between mb-0"
              >
                <img
                  src="assets/images/leftCircle.svg"
                  class="img-fluid"
                  style="cursor: pointer"
                />
              </div>
              <h5 class="mb-0 mt-4 general-title">General</h5>
              <div class="row align-items-center">
                <div class="col-md-8">
                  <div class="form-group">
                    <label class="mt-3" for="customer">Customers:</label>
                    <ng-select
                      [items]="customersData"
                      bindLabel="name"
                      bindValue="id"
                      class="custom"
                      formControlName="customer"
                      placeholder="Select customer"
                      [searchable]="true"
                      (change)="onCustomerSelected($event)"
                    >
                      <!-- Custom placeholder and icon -->
                      <ng-template ng-placeholder-tmp>
                        <div class="ng-select-placeholder">
                          <i class="fa fa-search search-icon"></i>
                          <span class="placeholder-text">Select customer</span>
                        </div>
                      </ng-template>
                    </ng-select>

                    <!-- <ng-select [items]="customersData" bindLabel="name" bindValue="id"
                                            formControlName="customer" placeholder="Select customer" [searchable]="true"
                                            (change)="onCustomerSelected($event)">
                                        </ng-select> -->
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="mt-3" for="status">Status:</label>
                    <ng-select
                      [items]="statusData"
                      bindLabel="name"
                      bindValue="id"
                      formControlName="status"
                      placeholder="Select status"
                      [editableSearchTerm]="true"
                      [searchable]="true"
                      (change)="onStatusSelected($event)"
                    >
                    </ng-select>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="mt-3" for="refNo">Ref No:</label>
                    <input
                      formControlName="refNo"
                      class="form-control"
                      type="text"
                      placeholder="Enter Ref No."
                    />
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="mt-3" for="soDate">So Date:</label>
                    <input
                      formControlName="soDate"
                      class="form-control"
                      bsDatepicker
                      type="date"
                    />
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="mt-3" for="cancelDate">Cancel Date:</label>
                    <input
                      formControlName="cancelDate"
                      class="form-control"
                      type="date"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card mt-2">
            <div class="card-body pb-0">
              <div
                class="d-flex align-items-center justify-content-between mb-0"
              >
                <h5 class="mb-0 general-title">Address Info</h5>
              </div>
              <div class="row align-items-center">
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="mt-3" for="shipTo">Ship to Address:</label>
                    <ng-select
                      [items]="shipAddressData"
                      bindLabel="name"
                      bindValue="id"
                      formControlName="shipToAddress"
                      placeholder="Select Ship Address"
                      [searchable]="true"
                      (change)="onShipAddressSelected($event)"
                    >
                    </ng-select>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="mt-3" for="billTo">Bill to Address:</label>
                    <ng-select
                      [items]="billAddressData"
                      bindLabel="name"
                      bindValue="id"
                      formControlName="billToAddress"
                      placeholder="Select Bill Address"
                      [searchable]="true"
                      (change)="onBillAddressSelected($event)"
                    >
                    </ng-select>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="mt-3" for="phNo">Ph No:</label>
                    <input
                      formControlName="phNo"
                      class="form-control mt-2"
                      type="text"
                      placeholder="Enter phone no."
                    />
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="mt-3" for="saleRe">Sales Rep:</label>
                    <input
                      formControlName="saleRep"
                      class="form-control"
                      type="text"
                      placeholder="Enter sale rep"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card mt-2">
            <div class="card-body">
              <div
                class="d-flex align-items-center justify-content-between mb-0"
              >
                <h5 class="mb-0 general-title">Details</h5>
              </div>
              <div class="row align-items-center">
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="mt-3" for="itemId">Item ID:</label>
                    <input
                      formControlName="itemID"
                      class="form-control mt-2"
                      type="text"
                      placeholder="Enter item id"
                    />
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="mt-3" for="descr">Description:</label>
                    <ng-select
                      [items]="descriptionData"
                      bindLabel="name"
                      bindValue="id"
                      formControlName="description"
                      placeholder="Select description"
                      [searchable]="true"
                      (change)="onDescriptionSelected($event)"
                    >
                    </ng-select>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="mt-3" for="orderQt">Order Qty:</label>
                    <input
                      formControlName="orderQty"
                      class="form-control mt-2"
                      type="text"
                      placeholder="Enter order quantity"
                    />
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="mt-3" for="price">Price:</label>
                    <input
                      formControlName="price"
                      class="form-control"
                      type="text"
                      placeholder="Enter price"
                    />
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="mt-3" for="extPri">Ext Price:</label>
                    <input
                      formControlName="extPrice"
                      class="form-control"
                      type="text"
                      placeholder="Enter ext price"
                    />
                  </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                      <label class="mt-3" for="com">Commnet:</label>
                      <input
                        formControlName="comment"
                        class="form-control"
                        type="text"
                        placeholder="Enter comment"
                      />
                    </div>
                  </div>
              </div>

              <div
                class="footer-btn d-flex align-items-center justify-content-center mt-3"
              >
                <button class="cancel-btn me-4">Cancel</button>
                <button class="add-btn">Add</button>
              </div>
            </div>
          </div>

          <div class="card mt-2">
            <div class="card-body">
              <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
                <li [ngbNavItem]="1">
                  <button ngbNavLink>Customer Instruction</button>
                </li>
                <li [ngbNavItem]="2">
                  <button ngbNavLink>Item</button>
                </li>
                <li [ngbNavItem]="3">
                  <button ngbNavLink>Office Instruction</button>
                </li>
              </ul>
              <div [ngbNavOutlet]="nav" class="mt-2"></div>
              <div *ngIf="active === 1">
                <div class="mt-3">
                  <label for="customerInst">Customer Instructions:</label>
                </div>
                <textarea
                  id="customerInst"
                  formControlName="customerInstruction"
                  name="customerInstruction"
                  rows="4"
                  cols="100"
                  class="w-auto textarea-field"
                  readonly
                ></textarea>
              </div>

              <div *ngIf="active === 2">
                <div class="mt-3">
                  <label for="item">Item:</label>
                </div>
                <textarea
                  id="item"
                  formControlName="item"
                  name="item"
                  rows="4"
                  cols="100"
                  class="w-auto textarea-field"
                  readonly
                ></textarea>
              </div>
              <div *ngIf="active === 3">
                <div class="mt-3">
                  <label for="officeInst">Office Instructions:</label>
                </div>
                <textarea
                  id="officeInst"
                  formControlName="officeInstruction"
                  name="officeInstruction"
                  rows="4"
                  cols="100"
                  class="w-auto textarea-field"
                  readonly
                ></textarea>
              </div>
            </div>
          </div>
        </div>
      </div>
     
        <div class="card order-summary pe-3">
          <div class="card-body py-3">
            <h5 class="general-title">Order Summary</h5>
            <div class="mt-3 order-summary-scroll">
              <div
                class="main-order"
                *ngFor="let item of summaryData; let i = index"
              >
                <div class="d-flex align-items-center justify-content-between">
                  <span class="order-title">{{ item.title }}</span>
                  <span class="order-price d-flex align-items-center"
                    >Rs {{ item.netPrice }}
                    <i class="fa fa-trash-can delete-icon ms-2"></i>
                  </span>
                </div>
                <span class="order-title">{{ item.subTitle }}</span>
                <div
                  class="d-flex align-items-center justify-content-between mt-1"
                >
                  <span class="sub-order">Quantity</span>
                  <span class="sub-order">{{ item.quantity }}</span>
                </div>
                <div class="d-flex align-items-center justify-content-between">
                  <span class="sub-order">Tax Amount</span>
                  <span class="sub-order">Rs {{ item.taxAmount }}</span>
                </div>
                <div class="d-flex align-items-center justify-content-between">
                  <span class="sub-order">Price</span>
                  <span class="sub-order">Rs {{ item.price }}</span>
                </div>
              </div>
            </div>
            <div class="main-order mt-3">
              <div class="d-flex align-items-center justify-content-between">
                <span class="sub-order">Total Qty</span>
                <span class="sub-order mt-2">10</span>
              </div>
              <div class="d-flex align-items-center justify-content-between">
                <span class="sub-order">Tax 15% on 300</span>
                <span class="sub-order mt-2">01</span>
              </div>
              <div class="d-flex align-items-center justify-content-between">
                <span class="sub-order">Total Ext. Price</span>
                <span class="sub-order mt-2">$ 300.0</span>
              </div>
              <div class="d-flex align-items-center justify-content-between">
                <span class="total-order">Total Price</span>
                <span class="total-order">Rs 3864</span>
              </div>
            </div>

            <div
              class="footer-btn d-flex align-items-center justify-content-center mt-3"
            >
              <button class="add-btn">Save</button>
            </div>
          </div>
        </div>
    
    </form>
  </div>
</section>
