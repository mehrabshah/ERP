<app-top-bar [toBarTitle]="toBarTitle"></app-top-bar>
<section class="main-wrapper">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12 col-lg-12">
        <div class="card">
          <div class="card-body pb-0">
            <div class="mb-0 d-flex align-items-center justify-content-between">
              <div class="d-flex align-items-center justify-content-center">
                <img
                  src="assets/images/leftCircle.svg"
                  class="img-fluid"
                  style="cursor: pointer"
                />
                <h5 class="mb-0 ms-3 pb-1 sale-order">Sales Orders</h5>
              </div>
              <div
                class="d-flex mt-0 d-md-none align-items-center new-btn-section"
              >
                <i
                  class="fa-solid fa-list list-icon me-md-4 me-3"
                  style="cursor: pointer"
                ></i>
                <img
                  src="assets/images/file.svg"
                  class="img-fluid me-md-4 me-3"
                  style="width: 16px; cursor: pointer"
                />
                <button
                  class="new-btn d-flex align-items-center justify-content-center"
                  (click)="createSaleOrder()"
                >
                  <i class="fa fa-plus me-sm-2"></i>
                  <span class="d-none d-sm-block">New</span>
                </button>
              </div>
            </div>
            <div class="mt-md-4 mt-0">
              <div
                class="d-flex justify-content-between justify-content-end align-items-center mt-md-5 mt-3"
              >
                <form
                  [formGroup]="salesFilterForm"
                  class="search-container align-items-start align-items-sm-center mb-0 d-flex flex-column flex-sm-row"
                >
                  <div
                    class="form d-flex select-container mt-2 mt-sm-0 flex-row"
                  >
                    <ng-select
                      [items]="filterData"
                      bindLabel="name"
                      bindValue="id"
                      class="filter-field me-2 mt-1"
                      formControlName="filter"
                      placeholder="Filter"
                      [searchable]="true"
                      (change)="onfilterSelected($event)"
                    >
                      <ng-template ng-placeholder-tmp>
                        <div class="ng-select-placeholder">
                          <i class="fa fa-search search-icon"></i>
                          <span class="placeholder-text">Filter</span>
                        </div>
                      </ng-template>
                    </ng-select>
                    <ng-select
                      [items]="operatorData"
                      bindLabel="name"
                      bindValue="id"
                      class="filter-field me-2 mt-1"
                      formControlName="operator"
                      placeholder="Operator"
                      [searchable]="true"
                      (change)="onCustomerSelected($event)"
                    >
                      <ng-template ng-placeholder-tmp>
                        <div class="ng-select-placeholder">
                          <i class="fa fa-search search-icon"></i>
                          <span class="placeholder-text">Operator</span>
                        </div>
                      </ng-template>
                    </ng-select>
                  </div>

                  <div
                    class="d-flex align-items-center justify-content-center mt-3 mt-sm-0 mt-sm-0 mb-0"
                  >
                    <input
                      formControlName="value"
                      class="filter-value-field  mb-0"
                      type="text"
                      placeholder="value"
                    />

                    <button type="button " class="filter-btn ms-1 mb-0">
                      <i class="fa fa-plus"></i>
                    </button>
                  </div>
                </form>
                <div
                  class="d-md-flex d-none align-items-center new-btn-section"
                >
                  <i
                    class="fa-solid fa-list list-icon me-md-4 me-3"
                    style="cursor: pointer"
                  ></i>
                  <img
                    src="assets/images/file.svg"
                    class="img-fluid me-md-4 me-3"
                    style="width: 16px; cursor: pointer"
                  />
                  <button
                    class="new-btn d-flex align-items-center justify-content-center"
                    (click)="createSaleOrder()"
                  >
                    <i class="fa fa-plus me-md-2"></i>
                    <span class="m-0 p-0 d-none d-md-block">New</span>
                  </button>
                </div>
              </div>
              <div class="d-flex justify-content-start d-xxl-flex d-none">
                <div class="mt-3">
                  <button type="button" class="outline-btn me-3">
                    Confirmation
                    <i class="fa fa-xmark cross-outline ms-2"></i>
                  </button>
                  <button type="button" class="outline-btn me-3">
                    Out Date = 1000
                    <i class="fa fa-xmark cross-outline ms-2"></i>
                  </button>
                  <button type="button" class="outline-btn">
                    Vehicle No
                    <i class="fa fa-xmark cross-outline ms-2"></i>
                  </button>
                </div>
              </div>
            </div>
            <div
              class="d-flex flex-column flex-sm-row justify-content-between mt-sm-5 mt-4"
            >
              <div>
                <button
                  class="header-btn mx-1"
                  [ngClass]="{ active: activeButton === 'All' }"
                  (click)="setActive('All')"
                >
                  All
                </button>
                <button
                  class="header-btn mx-1"
                  [ngClass]="{ active: activeButton === 'New' }"
                  (click)="setActive('New')"
                >
                  New
                </button>
                <button
                  class="header-btn"
                  [ngClass]="{ active: activeButton === 'Close' }"
                  (click)="setActive('Close')"
                >
                  Close
                </button>
                <button
                  class="header-btn mx-1"
                  [ngClass]="{ active: activeButton === 'Open' }"
                  (click)="setActive('Open')"
                >
                  Open
                </button>
                <button
                  class="header-btn"
                  [ngClass]="{ active: activeButton === 'Void' }"
                  (click)="setActive('Void')"
                >
                  Void
                </button>
                <button
                  class="header-btn mx-md-1 ps-1 ps-md-2"
                  [ngClass]="{ active: activeButton === 'Returned' }"
                  (click)="setActive('Returned')"
                >
                  Returned
                </button>
              </div>
              <div class="mt-3 mt-sm-0">
                <button
                  class="header-btn mx-md-1 ms-1 ps-1"
                  [ngClass]="{ active: activeOtherButton === 'Void' }"
                  (click)="setOtherActive('Void')"
                >
                  Void
                </button>
                <button
                  class="header-btn mx-md-1 ps-2 ps-md-2"
                  [ngClass]="{ active: activeOtherButton === 'Preview' }"
                  (click)="setOtherActive('Preview')"
                >
                  Preview
                </button>
              </div>
              <div class="mt-xl-0 mt-3 mt-sm-0">
                <button
                  class="header-btn mx-1"
                  [ngClass]="{ active: activeFileButton === 'AllFile' }"
                  (click)="setActiveFile('AllFile')"
                >
                  All
                </button>
                <button
                  class="header-btn mx-1"
                  [ngClass]="{ active: activeFileButton === 'Excel' }"
                  (click)="setActiveFile('Excel')"
                >
                  Excel
                </button>
                <button
                  class="header-btn mx-1"
                  [ngClass]="{ active: activeFileButton === 'Csv' }"
                  (click)="setActiveFile('Csv')"
                >
                  Csv
                </button>
                <button
                  class="header-btn mx-1"
                  [ngClass]="{ active: activeFileButton === 'Print' }"
                  (click)="setActiveFile('Print')"
                >
                  Print
                </button>
                <button
                  class="header-btn mx-md-1 ps-1 ps-md-2"
                  [ngClass]="{ active: activeFileButton === 'coloumnVisible' }"
                  (click)="setActiveFile('coloumnVisible')"
                >
                  Coloumn Visibility
                </button>
              </div>
            </div>
            <div class="table-responsive">
              <table class="table">
                <thead class="tbody">
                  <tr>
                    <th>
                      <input
                        class="checkbox"
                        type="checkbox"
                        (change)="toggleAll($event)"
                        [checked]="isAllSelected()"
                      />
                    </th>
                    <th scope="col">
                      So no
                      <i class="fa-solid fa-angle-down arrow-icon ms-1"></i>
                    </th>
                    <th></th>
                    <th scope="col">
                      Customers
                      <i class="fa-solid fa-angle-down arrow-icon ms-1"></i>
                    </th>
                    <th scope="col">
                      Region
                      <i class="fa-solid fa-angle-down arrow-icon ms-1"></i>
                    </th>
                    <th scope="col">
                      So Date
                      <i class="fa-solid fa-angle-down arrow-icon ms-1"></i>
                    </th>
                    <th scope="col">Confirm Date</th>
                    <th scope="col">Status</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Amount</th>
                    <th scope="col">Prepared by</th>
                    <th scope="col">Approved by</th>
                  </tr>
                </thead>
                <tbody class="tbody">
                  <tr
                    *ngFor="let item of items && filteredItems; let i = index"
                    class="align-items-center"
                  >
                    <td class="table-row">
                      <input
                        type="checkbox"
                        class="checkbox"
                        [(ngModel)]="item.selected"
                        (change)="updateSelection()"
                      />
                    </td>
                    <th class="table-row">
                      {{ item.id }}
                    </th>
                    <th class="table-row" scope="row">
                      <img
                        src="assets/images/Group.svg"
                        class="img-fluid me-2"
                        style="width: 15px"
                      />
                      <img
                        src="assets/images/Group1.svg"
                        class="img-fluid me-2"
                        style="width: 15px"
                      />
                      <img
                        src="assets/images/Group2.svg"
                        class="img-fluid me-2"
                        style="width: 15px"
                      />
                      <img
                        src="assets/images/tableIcon.svg"
                        class="img-fluid me-2"
                        style="width: 15px"
                      />
                      <img
                        src="assets/images/tableCross.svg"
                        class="img-fluid"
                        style="width: 15px"
                      />
                    </th>
                    <td class="table-row text-center">{{ item.customers }}</td>
                    <td class="table-row">{{ item.region }}</td>
                    <td class="table-row">{{ item.date }}</td>
                    <td class="table-row">{{ item.confirmDate }}</td>
                    <td class="table-row">
                      <button
                        type="button"
                        class="default-btn"
                      >
                        {{ item.status }}
                      </button>
                    </td>
                    <td class="table-row">{{ item.quantity }}</td>
                    <td class="table-row">{{ item.amount }}</td>
                    <td class="table-row">{{ item.preparedBy }}</td>
                    <td class="table-row">{{ item.approvedBy }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
